{% extends "dna_center_cisco/base.html" %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-body">
    <h2 class="h5 mb-3">Device Interfaces</h2>

    <form method="post" class="mb-3">
      {% csrf_token %}
      <div class="mb-3">
        <label for="device_ip" class="form-label">Device Management IP</label>
        <input
          type="text"
          class="form-control"
          id="device_ip"
          name="device_ip"
          placeholder="e.g. 10.10.20.1"
          value="{{ device_ip }}"
          required
        >
      </div>
      <button type="submit" class="btn btn-primary">Show Interfaces</button>
    </form>

    {% if error %}
      <div class="alert alert-danger">
        <strong>Error:</strong> {{ error }}
      </div>
    {% endif %}

    {% if interfaces %}
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Interface</th>
              <th>Status</th>
              <th>VLAN</th>
              <th>Speed</th>
            </tr>
          </thead>
          <tbody>
            {% for i in interfaces %}
              <tr>
                <td>{{ i.portName|default:"N/A" }}</td>
                <td>{{ i.status|default:"N/A" }}</td>
                <td>{{ i.vlanId|default:"N/A" }}</td>
                <td>{{ i.speed|default:"N/A" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% elif device_ip and not error %}
      <p>No interfaces found for this device.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
